<!-- d5710803-6534-4833-a5c8-b7c59003c60a 8a26e04b-d2f8-4542-9579-4d5577dcf187 -->
# –ü–ª–∞–Ω –∞–Ω–∞–ª–∏–∑–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏—è –∫ MVP

## –û–±–∑–æ—Ä

–ü—Ä–æ–≤–µ–¥–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã digest-core. –†–µ—à–µ–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ **—á–∞—Å—Ç–∏—á–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏** (~65-70% –æ—Ç MVP). –û—Å–Ω–æ–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –Ω–æ –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

## 1. –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (65-70%)

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ CLI

- ‚úÖ Pydantic-based –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π YAML (`config.py`)
- ‚úÖ Typer CLI —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏ (`cli.py`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ environment variables –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- ‚ö†Ô∏è –§–ª–∞–≥ `--dry-run` –æ–±—ä—è–≤–ª–µ–Ω, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

#### Ingestion (EWS)

- ‚úÖ NTLM –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ exchangelib (`ingest/ews.py`)
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ autodiscover
- ‚úÖ SSL context —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º CA
- ‚úÖ Watermark/SyncState –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏
- ‚úÖ –û–∫–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏ (calendar_day / rolling_24h)
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è SyncFolderItems API
- ‚ö†Ô∏è –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ fallback –ø—Ä–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–∏ watermark
- ‚ö†Ô∏è Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è 429/503 –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

#### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

- ‚úÖ HTML‚Üí—Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ BeautifulSoup (`normalize/html.py`)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ inline attachments –∏ tracking pixels
- ‚úÖ Truncate –±–æ–ª—å—à–∏—Ö —Ç–µ–ª –ø–∏—Å–µ–º (200KB)
- ‚úÖ PII masking –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω LLM Gateway API (–ø–æ –ø–æ–ª–∏—Ç–∏–∫–µ)
- ‚ö†Ô∏è `normalize/quotes.py` - –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ denylist –¥–ª—è —É—Ç–µ—á–µ–∫ PII

#### Thread Building

- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ conversation_id (`threads/build.py`)
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ msg_id
- ‚úÖ Fallback –Ω–∞ subject-based threading
- ‚úÖ –õ–∏–º–∏—Ç—ã: max 50 —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Ç—Ä–µ–¥
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–¥–æ–≤

#### Evidence Splitting

- ‚úÖ –†–∞–∑–±–∏–µ–Ω–∏–µ –ø–æ –∞–±–∑–∞—Ü–∞–º –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º (`evidence/split.py`)
- ‚úÖ Token budget: 3000 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å
- ‚úÖ –õ–∏–º–∏—Ç 12 —á–∞–Ω–∫–æ–≤ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ –û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ (1.3√ó—Å–ª–æ–≤–∞)
- ‚úÖ Priority scoring

#### Context Selection

- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö –ø–∏—Å–µ–º (`select/context.py`)
- ‚úÖ Positive/negative signal patterns
- ‚úÖ Direct address –∏ deadline scoring
- ‚úÖ Top-K selection —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º

#### LLM Gateway

- ‚úÖ HTTP client —Å retry –ª–æ–≥–∏–∫–æ–π (`llm/gateway.py`)
- ‚úÖ JSON validation retry
- ‚ö†Ô∏è Quality retry —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ Token usage extraction
- ‚úÖ Latency measurement
- ‚ùå Cost budget enforcement –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚ùå Rate limit handling —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

#### Schema & Assembly

- ‚úÖ Pydantic —Å—Ö–µ–º—ã –¥–ª—è Digest/Section/Item (`llm/schemas.py`)
- ‚úÖ JSON output —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (`assemble/jsonout.py`)
- ‚ö†Ô∏è Markdown assembly –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω
- ‚úÖ schema_version –∏ prompt_version –≤ —Å—Ö–µ–º–µ

#### Observability

- ‚úÖ Prometheus metrics –Ω–∞ :9108 (`observability/metrics.py`)
- ‚úÖ Health/readiness endpoints –Ω–∞ :9109 (`observability/healthz.py`)
- ‚úÖ Structlog –¥–ª—è JSON –ª–æ–≥–æ–≤
- ‚ö†Ô∏è PII redaction –≤ –ª–æ–≥–∞—Ö –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚ö†Ô∏è –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ –≤—ã—Å–æ–∫—É—é –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

- ‚úÖ T-48h rebuild window —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `run.py`
- ‚ö†Ô∏è –§–ª–∞–≥ `--force` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ rebuild –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

### ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏–ª–∏ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (30-35%)

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã

1. **Dry-run mode** (cli.py:18-22)

- –û–±—ä—è–≤–ª–µ–Ω, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "not yet implemented"
- –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ LLM

2. **Quote cleaning** (normalize/quotes.py)

- –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ
- –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞: —É–¥–∞–ª–µ–Ω–∏–µ —Ü–∏—Ç–∞—Ç, –ø–æ–¥–ø–∏—Å–µ–π, disclaimers

3. **PII denylist check**

- –ü–æ BRD.md —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ç–µ—á–∫—É PII –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

4. **LLM cost budget**

- config.llm.cost_limit_per_run –æ–±—ä—è–≤–ª–µ–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

5. **LLM quality retry**

- –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ "promising evidence" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

6. **Rate limit handling**

- Retry –¥–ª—è 429/503 –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å jittered exponential backoff
- –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞

7. **Markdown assembler**

- –§–∞–π–ª `assemble/markdown.py` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: ‚â§400 —Å–ª–æ–≤, —Å—Å—ã–ª–∫–∏ –Ω–∞ evidence

8. **Health/readiness endpoints**

- –§–∞–π–ª `observability/healthz.py` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞

9. **Prompts**

- –§–∞–π–ª—ã `extract_actions.v1.j2` –∏ `summarize.v1.j2` —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

10. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –¥–Ω–µ–π**

- –õ–æ–≥–∏–∫–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∞–ª–∏–¥–Ω–æ–≥–æ –ø—É—Å—Ç–æ–≥–æ JSON —Å `sections=[]` –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞

## 2. –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (40-50% –ø–æ–∫—Ä—ã—Ç–∏—è)

### ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã (14 —Ñ–∞–π–ª–æ–≤)

–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã 3 —Ç–µ—Å—Ç–∞:

- ‚úÖ `test_pii_policy.py` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ PII –≤ LLM)
- ‚úÖ `test_ews_ingest.py` - —Ö–æ—Ä–æ—à–∏–π –Ω–∞–±–æ—Ä –º–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ `test_llm_gateway.py` - –ø–æ–∫—Ä—ã–≤–∞–µ—Ç retry –ª–æ–≥–∏–∫—É

### ‚ùå –ü—Ä–æ–±–µ–ª—ã –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç—å:

1. **test_normalize.py** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è:

- HTML‚Üí—Ç–µ–∫—Å—Ç —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π
- –£–¥–∞–ª–µ–Ω–∏–µ —Ü–∏—Ç–∞—Ç –∏ –ø–æ–¥–ø–∏—Å–µ–π
- Truncate –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ UTF-8
- Inline attachments –∏ tracking pixels

2. **test_selector.py** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è OOO/DSN
- Scoring heuristics
- Token budget —Å–æ–±–ª—é–¥–µ–Ω–∏–µ

3. **test_evidence_split.py** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- –†–∞–∑—Ä–µ–∑ –ø–æ –∞–±–∑–∞—Ü–∞–º/–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º
- –õ–∏–º–∏—Ç 12 —á–∞–Ω–∫–æ–≤
- Token budget 3000

4. **test_idempotency.py** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- T-48h rebuild window
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

5. **test_markdown_json_assemble.py** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- Markdown ‚â§400 —Å–ª–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è JSON —Å—Ö–µ–º—ã
- –ü—É—Å—Ç—ã–µ –¥–Ω–∏

6. **test_observability.py** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- /healthz –∏ /readyz endpoints
- –ú–µ—Ç—Ä–∏–∫–∏ –±–µ–∑ –≤—ã—Å–æ–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

7. **test_llm_contract.py** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—Ä–∏–º–µ—Ä–æ–≤

8. **test_masking.py** - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ—è—Å–Ω–æ (–≤–æ–∑–º–æ–∂–Ω–æ, –¥—É–±–ª–∏–∫–∞—Ç test_pii_policy)

9. **test_smoke_cli.py** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å end-to-end —Ç–µ—Å—Ç—ã

### –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã

- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è `quotes.py`
- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è `markdown.py`
- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è `healthz.py`
- ‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º EWS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚ùå –¢–µ—Å—Ç—ã —Ñ–∏–∫—Å—Ç—É—Ä –Ω–∞ 30+ –ø–∏—Å–µ–º (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å `tests/fixtures/emails/`)

## 3. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Å–∫—Ä–∏–ø—Ç—ã

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

- ‚úÖ `test.sh` - pytest —Å coverage
- ‚úÖ `lint.sh` - ruff + black + mypy
- ‚ùå –û—Å—Ç–∞–ª—å–Ω—ã–µ 6 —Å–∫—Ä–∏–ø—Ç–æ–≤ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
- `build.sh`
- `deploy.sh`
- `smoke.sh`
- `run-local.sh`
- `rotate_state.sh`
- `print_env.sh`

### ‚úÖ Makefile

- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞—Ä–≥–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –¢–∞—Ä–≥–µ—Ç `ci: lint test` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### ‚ö†Ô∏è Docker

- ‚úÖ Dockerfile —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –≤—ã–≥–ª—è–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω –Ω–∞ —Å–±–æ—Ä–∫—É
- ‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### ‚ùå Systemd unit/timer

- ‚ùå –ü—Ä–∏–º–µ—Ä—ã –≤ README, –Ω–æ —Ñ–∞–π–ª—ã –Ω–µ —Å–æ–∑–¥–∞–Ω—ã
- ‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è `examples/systemd/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

## 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### ‚úÖ –•–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ

- ‚úÖ BRD.md - –ø–æ–ª–Ω—ã–µ –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- ‚úÖ ARCH.md - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ TECH.md - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- ‚úÖ README.md - —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

- README.md —Å–µ–∫—Ü–∏–∏:
- PII Policy: –Ω—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å, —á—Ç–æ email –ù–ï –º–∞—Å–∫–∏—Ä—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (—Ç–æ–ª—å–∫–æ –≤ LLM Gateway)
- Diagnostics: –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã —Ä–∞–∑–±–æ—Ä–∞ –æ—à–∏–±–æ–∫
- Rotation policy: —É—Ç–æ—á–Ω–∏—Ç—å 30/14/90 –¥–Ω–µ–π

### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

- ‚ùå Changelog/Release notes
- ‚ùå Contributing guidelines (–µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞)
- ‚ùå Troubleshooting guide

## 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### ‚ö†Ô∏è Config —Ñ–∞–π–ª—ã

- ‚úÖ `configs/config.example.yaml` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ùå –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ TECH.md
- ‚ùå `.env.example` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (—É–ø–æ–º—è–Ω—É—Ç –≤ README:149)

## 6. Prompts

### ‚ö†Ô∏è Jinja2 templates

- ‚úÖ `extract_actions.v1.j2` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ `summarize.v1.j2` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ùå –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞:
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏–∑ TECH.md:107-122
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ "Return strict JSON only"
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `[[REDACT:...]]` markers
- Russian locale –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## 7. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–∞–±–æ—Ç –¥–æ MVP

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–±–ª–æ–∫–∏—Ä—É—é—Ç MVP)

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å dry-run mode
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å quotes.py, markdown.py, healthz.py
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å config.example.yaml
- –°–æ–∑–¥–∞—Ç—å .env.example

2. **–î–æ–ø–æ–ª–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

- PII denylist check –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
- LLM cost budget enforcement
- Quality retry —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π promising evidence
- Rate limit exponential backoff
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –¥–Ω–µ–π

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏:**

- –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ 14 —Ç–µ—Å—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å coverage ‚â•70%
- –î–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–±–µ–ª–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å snapshot —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É:**

- –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ 8 —Å–∫—Ä–∏–ø—Ç–æ–≤
- Smoke test end-to-end

### üü° –í–∞–∂–Ω—ã–µ (—É–ª—É—á—à–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ MVP)

5. **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**

- –ó–∞–ø—É—Å—Ç–∏—Ç—å lint –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏
- –î–æ–±–∞–≤–∏—Ç—å type hints –≥–¥–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- Code review –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π

6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**

- –û–±–Ω–æ–≤–∏—Ç—å README —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –°–æ–∑–¥–∞—Ç—å troubleshooting guide
- –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

7. **Observability:**

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –≤—ã—Å–æ–∫—É—é –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –î–æ–±–∞–≤–∏—Ç—å PII redaction –≤ –ª–æ–≥–∏
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å healthz/readyz

### üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –ø–æ—Å–ª–µ MVP)

8. **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è:**

- –ü—Ä–∏–º–µ—Ä—ã systemd unit/timer
- CI/CD pipeline (GitHub Actions)
- Integration tests —Å –Ω–∞—Å—Ç–æ—è—â–∏–º EWS

9. **–£–ª—É—á—à–µ–Ω–∏—è:**

- –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ (tiktoken)
- Adaptive chunk sizing
- –ë–æ–ª–µ–µ —É–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö –ø–∏—Å–µ–º

## 8. –û—Ü–µ–Ω–∫–∞ —Å—Ä–æ–∫–æ–≤

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:

- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã (MVP-–±–ª–æ–∫–µ—Ä—ã):** 3-5 –¥–Ω–µ–π
- **–í–∞–∂–Ω—ã–µ —Ä–∞–±–æ—Ç—ã (–∫–∞—á–µ—Å—Ç–≤–æ):** 2-3 –¥–Ω—è
- **–ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã:** 1-2 –¥–Ω—è

**–ò—Ç–æ–≥–æ –¥–æ –≥–æ—Ç–æ–≤–æ–≥–æ MVP:** 5-8 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π

## 9. –†–∏—Å–∫–∏

1. **EWS –¥–æ—Å—Ç—É–ø** - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **LLM Gateway API** - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
3. **–ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ–º–ø—Ç–æ–≤** - –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞
4. **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–±–æ—Ä–∫–∞ ‚â•200 –ø–∏—Å–µ–º –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (BRD.md:66)

## 10. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
- –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑

2. **–í —Å–ª–µ–¥—É—é—â—É—é –æ—á–µ—Ä–µ–¥—å:**

- –î–æ–ø–æ–ª–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤ –∫–æ–¥–µ
- –î–æ–≤–µ—Å—Ç–∏ coverage –¥–æ ‚â•70%
- End-to-end smoke test

3. **–ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º:**

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º EWS
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å LLM Gateway API
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—ã–±–æ—Ä–∫–µ ‚â•200 –ø–∏—Å–µ–º

### To-dos

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (quotes.py, markdown.py, healthz.py, prompts, config)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å coverage
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å 6 –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- [ ] –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã (dry-run, PII denylist, cost budget, rate limit)
- [ ] –î–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–æ coverage ‚â•70% –∏ –¥–æ–±–∞–≤–∏—Ç—å snapshot —Ç–µ—Å—Ç—ã
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä—ã –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å end-to-end smoke test —Å mock –¥–∞–Ω–Ω—ã–º–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å README –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (.env.example, troubleshooting)
- [ ] –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º EWS —Å LLM Gateway API (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)