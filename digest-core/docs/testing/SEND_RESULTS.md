# Инструкция по отправке результатов тестирования

## Обзор

После завершения тестирования SummaryLLM вам нужно отправить результаты через корпоративную почту. Эта инструкция поможет правильно подготовить и отправить диагностическую информацию.

## Шаг 1: Запуск тестирования

### Автоматический запуск (рекомендуется)
```bash
cd digest-core
./scripts/test_run.sh
```

Этот скрипт:
- Запустит все необходимые тесты
- Автоматически соберет диагностику
- Создаст архив для отправки
- Покажет путь к архиву

### Ручной запуск
Если нужно запустить тесты вручную:

```bash
# 1. Запуск тестов
python3 -m digest_core.cli run --dry-run
python3 -m digest_core.cli run --out ./out

# 2. Сбор диагностики
./scripts/collect_diagnostics.sh
```

## Шаг 2: Поиск архива диагностики

После завершения тестирования найдите созданный архив:

```bash
# Архив будет создан в ~/.digest-temp/
ls -la ~/.digest-temp/diagnostics-*.tar.gz

# Или найдите последний созданный архив
ls -t ~/.digest-temp/diagnostics-*.tar.gz | head -1
```

Архив имеет формат: `diagnostics-YYYY-MM-DD-HH-MM-SS.tar.gz`

## Шаг 3: Проверка архива

Проверьте содержимое архива перед отправкой:

```bash
# Посмотреть содержимое архива
tar -tzf ~/.digest-temp/diagnostics-2024-01-15-10-30-45.tar.gz

# Проверить размер архива
du -h ~/.digest-temp/diagnostics-2024-01-15-10-30-45.tar.gz
```

**Важно**: Размер архива должен быть меньше 25MB для отправки по email.

## Шаг 4: Подготовка письма

### Тема письма
```
SummaryLLM Diagnostics - 2024-01-15
```

### Шаблон письма

```
Здравствуйте!

Провел тестирование SummaryLLM на корпоративном ноутбуке.

=== ВЫПОЛНЕННЫЕ ТЕСТЫ ===
✓ Подготовка окружения
✓ Smoke тесты (dry-run)
✓ Интеграционные тесты  
✓ Тесты граничных случаев
✓ Проверка качества

=== РЕЗУЛЬТАТЫ ===
- Время выполнения: [укажите время]
- Обработано писем: [количество]
- Создано действий: [количество]
- Размер дайджеста: [размер файлов]

=== НАЙДЕННЫЕ ПРОБЛЕМЫ ===
[Опишите проблемы, если есть, или напишите "Проблем не обнаружено"]

=== СИСТЕМНАЯ ИНФОРМАЦИЯ ===
- ОС: [укажите операционную систему]
- Python: [версия Python]
- Доступ к Exchange: [OK/FAILED]
- Доступ к LLM: [OK/FAILED]

Прикреплен архив диагностики: diagnostics-[timestamp].tar.gz

С уважением,
[Ваше имя]
```

## Шаг 5: Отправка через корпоративную почту

### В Outlook
1. Создайте новое письмо
2. В поле "Кому" укажите адрес получателя
3. В поле "Тема" вставьте тему из шаблона
4. В тело письма скопируйте текст из шаблона
5. Нажмите "Вложить файл" и выберите архив диагностики
6. Отправьте письмо

### В веб-интерфейсе
1. Откройте веб-интерфейс корпоративной почты
2. Нажмите "Написать письмо"
3. Заполните поля согласно шаблону
4. Прикрепите архив диагностики
5. Отправьте письмо

## Шаг 6: Проверка отправки

После отправки:
1. Убедитесь, что письмо отправлено успешно
2. Проверьте, что архив прикреплен
3. Сохраните копию письма для себя
4. При необходимости отправьте уведомление о готовности результатов

## Что включено в архив диагностики

Архив содержит:

```
diagnostics-YYYY-MM-DD-HH-MM-SS/
├── summary.txt              # Краткая сводка
├── logs/                    # Логи приложения
│   ├── run-YYYYMMDD-HHMMSS.log
│   └── ...
├── metrics/                 # Метрики Prometheus
│   └── prometheus.txt
├── config/                  # Конфигурация (без секретов)
│   ├── sanitized.yaml
│   └── config.example.yaml
├── system/                  # Системная информация
│   ├── system_info.txt
│   ├── processes.txt
│   └── env_diagnostics.txt
└── output/                  # Выходные файлы
    ├── digest-YYYY-MM-DD.json
    ├── digest-YYYY-MM-DD.md
    └── .state/
```

## Безопасность

- Все секретные данные (пароли, токены) автоматически удаляются из конфигурации
- Email адреса маскируются в логах
- Архив содержит только диагностическую информацию
- Никакие личные данные не включаются в архив

## Альтернативные способы передачи

Если email не подходит:

### Через файловую систему
```bash
# Скопировать архив в общую папку
cp /tmp/diagnostics-*.tar.gz /shared/digest-testing/
```

### Через USB/внешний носитель
```bash
# Скопировать на USB
cp /tmp/diagnostics-*.tar.gz /media/usb/
```

### Через облачное хранилище
Если есть доступ к корпоративному облаку, загрузите архив туда.

## Устранение проблем

### Архив слишком большой (>25MB)
```bash
# Создать архив без больших файлов
./scripts/collect_diagnostics.sh --exclude-large-files
```

### Проблемы с доступом к почте
1. Проверьте подключение к корпоративной сети
2. Убедитесь, что почтовый сервер доступен
3. Попробуйте отправить через веб-интерфейс

### Ошибки при создании архива
```bash
# Проверить права доступа
ls -la /tmp/
chmod 755 /tmp/

# Проверить свободное место
df -h /tmp/
```

## Контакты для поддержки

При возникновении проблем с отправкой результатов:
1. Сохраните архив диагностики локально
2. Обратитесь к системному администратору
3. Используйте альтернативные способы передачи
4. Сообщите о проблеме в письме

## Дополнительные ресурсы

- [Чек-лист тестирования](./MANUAL_TESTING_CHECKLIST.md)
- [Руководство по устранению неполадок](../troubleshooting/TROUBLESHOOTING.md)
- [Документация по установке](../installation/INSTALL.md)
