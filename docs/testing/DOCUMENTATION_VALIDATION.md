# Валидация документации SummaryLLM

## Цель

Этот документ описывает процесс валидации документации для обеспечения полноты, актуальности и корректности всех гайдов.

---

## Чек-лист проверки документации

### 1. E2E_TESTING_GUIDE.md

- [ ] Все шаги пронумерованы и последовательны
- [ ] Каждый код-блок содержит ожидаемый результат
- [ ] Все ссылки на другие документы корректны
- [ ] Примеры команд протестированы на чистой машине
- [ ] Troubleshooting покрывает типичные ошибки
- [ ] FAQ отвечает на основные вопросы
- [ ] Время выполнения (~30 минут) подтверждено
- [ ] Документ читабелен для не-разработчиков

**Тест:**
```bash
# Прочитайте гайд и выполните каждый шаг на чистой машине
# Зафиксируйте время начала и конца
# Отметьте все места, где возникли трудности
```

### 2. doctor.sh скрипт

- [ ] Скрипт исполняемый (`chmod +x`)
- [ ] Все проверки работают корректно
- [ ] Вывод понятен (✓/✗/⚠ icons)
- [ ] Exit codes корректны (0 = success, 1 = errors)
- [ ] Предложения по исправлению полезны
- [ ] Работает на macOS, Linux, WSL
- [ ] Не падает при отсутствии зависимостей

**Тест:**
```bash
./digest-core/scripts/doctor.sh
echo "Exit code: $?"
# Проверьте различные сценарии (без venv, без env vars, и т.д.)
```

### 3. README.md (корневой)

- [ ] Секция "Тестирование" актуальна
- [ ] Ссылка на E2E_TESTING_GUIDE присутствует
- [ ] Структура проекта отражает новые файлы
- [ ] Quick Start не дублирует E2E guide
- [ ] Badges (если есть) актуальны

**Тест:**
```bash
# Проверьте все ссылки
grep -r "\[.*\](.*.md)" README.md | while read line; do
    # Extract and validate links
    echo "Checking: $line"
done
```

### 4. MANUAL_TESTING_CHECKLIST.md

- [ ] Prerequisites секция добавлена
- [ ] Ссылка на E2E_TESTING_GUIDE в начале
- [ ] Специфичные проверки для корпоративных сред
- [ ] Чек-боксы работают в Markdown preview
- [ ] Все команды корректны

**Тест:**
```bash
# Выполните чек-лист полностью
# Отметьте галочками выполненные пункты
# Убедитесь, что не осталось неясных моментов
```

### 5. SEND_RESULTS.md

- [ ] Чек-лист перед отправкой добавлен
- [ ] Примеры отчетов (успешных и с проблемами) включены
- [ ] Секция безопасности расширена
- [ ] Инструкции по проверке архива актуальны

**Тест:**
```bash
# Создайте тестовый архив диагностики
./digest-core/scripts/collect_diagnostics.sh
# Следуйте инструкциям по проверке
# Убедитесь, что секреты удалены
```

### 6. Примеры отчетов

#### successful_test_report.md
- [ ] Пример полный и реалистичный
- [ ] Включает все обязательные секции
- [ ] Метрики выглядят правдоподобно
- [ ] Нет реальных секретных данных

#### failed_test_report.md
- [ ] Примеры ошибок детальные
- [ ] Workarounds практичны
- [ ] Рекомендации конкретны
- [ ] Приоритизация ошибок логична

#### corporate_laptop_setup.md
- [ ] Покрывает основные ОС (Windows, macOS, Linux)
- [ ] Решения для всех типичных проблем
- [ ] Примеры команд корректны
- [ ] Ссылки на E2E guide присутствуют

**Тест:**
```bash
# На корпоративном ноутбуке следуйте инструкциям
# Проверьте, что workarounds работают
```

### 7. TROUBLESHOOTING.md

- [ ] Секция "Corporate Laptop Specific Issues" добавлена
- [ ] Ссылка на corporate_laptop_setup.md
- [ ] Упоминание doctor.sh
- [ ] Инструкции для E2E тестирования

**Тест:**
```bash
# Симулируйте типичные проблемы
# Проверьте, что решения работают
```

---

## Процесс валидации на чистой машине

### Подготовка тестовой машины

Используйте одну из:
- **Виртуальная машина:** VirtualBox/VMware с чистой ОС
- **Docker контейнер:** Ubuntu/Debian image
- **Cloud instance:** AWS EC2/GCP Compute temporary instance
- **Реальный корпоративный ноутбук:** Идеально для финальной проверки

### Процедура тестирования

1. **Сброс окружения**
   ```bash
   # Удалите все следы предыдущих установок
   rm -rf ~/SummaryLLM
   rm -rf ~/.digest-*
   rm -f ~/.env
   
   # Очистите переменные окружения
   unset EWS_PASSWORD EWS_USER_UPN LLM_TOKEN
   ```

2. **Следуйте E2E_TESTING_GUIDE.md**
   - Начните с "Шаг 1: Подготовка окружения"
   - Выполните каждый шаг строго по инструкции
   - Фиксируйте время на каждом этапе
   - Отмечайте любые неясности

3. **Фиксируйте проблемы**
   ```markdown
   ## Проблема [номер]
   - **Шаг:** [номер шага из гайда]
   - **Команда:** `команда, которая вызвала проблему`
   - **Ошибка:** Точное сообщение
   - **Ожидалось:** Что должно было произойти
   - **Фактически:** Что произошло
   - **Как исправили:** Что помогло
   ```

4. **Проверка результата**
   - [ ] Установка завершена успешно
   - [ ] doctor.sh показывает все ✓
   - [ ] Dry-run запускается без ошибок
   - [ ] Полный цикл создает дайджест
   - [ ] Архив диагностики собирается
   - [ ] Время выполнения < 30 минут

### Контрольные вопросы

После прохождения всего E2E guide, ответьте:

1. **Понятность:**
   - Были ли неясные инструкции?
   - Требовалась ли дополнительная информация?
   - Все ли термины понятны?

2. **Полнота:**
   - Все ли необходимые шаги включены?
   - Достаточно ли примеров?
   - Покрыты ли все error cases?

3. **Корректность:**
   - Все ли команды работают?
   - Пути к файлам корректны?
   - Версии ПО актуальны?

4. **Практичность:**
   - Можно ли выполнить без помощи разработчика?
   - Workarounds работают?
   - Troubleshooting полезен?

---

## Автоматическая валидация

### Проверка ссылок

```bash
# Скрипт для проверки всех Markdown ссылок
cd /Users/ruslan/msc_1/git/SummaryLLM

find docs -name "*.md" -exec grep -H "\[.*\](.*.md)" {} \; | while IFS=: read -r file link; do
    # Extract path from [text](path.md)
    path=$(echo "$link" | grep -o '(.*\.md)' | tr -d '()')
    
    # Check if file exists relative to the markdown file
    dir=$(dirname "$file")
    if [ ! -f "$dir/$path" ]; then
        echo "BROKEN: $file -> $path"
    else
        echo "OK: $file -> $path"
    fi
done
```

### Проверка code blocks

```bash
# Извлечь все bash code blocks и проверить синтаксис
grep -A 20 '```bash' docs/**/*.md | grep -v '```' | bash -n

# Если нет ошибок синтаксиса - OK
```

### Проверка на секреты

```bash
# Убедитесь, что в документации нет реальных секретов
grep -r "password.*=.*[^*]" docs/ && echo "WARNING: Found passwords"
grep -r "token.*=.*[^*]" docs/ && echo "WARNING: Found tokens"
```

---

## График валидации

### При каждом коммите
- [ ] Проверка ссылок автоматически
- [ ] Проверка синтаксиса code blocks
- [ ] Проверка на случайные секреты

### Еженедельно
- [ ] Прочтение обновленных документов
- [ ] Проверка актуальности версий ПО
- [ ] Обновление примеров при необходимости

### Перед релизом
- [ ] Полная валидация на чистой машине (3 ОС)
- [ ] Тестирование на корпоративном ноутбуке
- [ ] Обновление всех метрик и примеров
- [ ] Peer review всех изменений

---

## Отчет о валидации

### Шаблон отчета

```markdown
# Отчет о валидации документации

**Дата:** 2024-10-13
**Валидатор:** [Имя]
**Окружение:** [ОС, Python версия]

## Результаты

### E2E_TESTING_GUIDE.md
- Статус: ✓ Passed / ✗ Failed
- Время выполнения: XX минут
- Найденные проблемы: [список]
- Предложения: [список]

### doctor.sh
- Статус: ✓ Passed / ✗ Failed
- Тестовые сценарии: X/Y прошли
- Проблемы: [список]

### Примеры
- successful_test_report.md: ✓/✗
- failed_test_report.md: ✓/✗
- corporate_laptop_setup.md: ✓/✗

## Общие выводы

[Ваши выводы]

## Рекомендации

1. [Рекомендация 1]
2. [Рекомендация 2]
```

---

## Контакты

При обнаружении проблем в документации:
1. Создайте issue с тегом `documentation`
2. Используйте шаблон отчета выше
3. Приложите лог валидации
4. Предложите исправление (опционально)

---

## См. также

- [E2E Testing Guide](./E2E_TESTING_GUIDE.md) - основной тестовый гайд
- [Contributing Guide](../../CONTRIBUTING.md) - как контрибьютить
- [Development Documentation](../development/IMPLEMENTATION_GUIDE.md) - для разработчиков


